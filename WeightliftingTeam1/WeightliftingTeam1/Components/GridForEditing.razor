@using WeightliftingTeam1.Data
@inject CrudService crudService
@inject DataRetrievalService dataRetrievalService
@typeparam TItem


<div class="shadow-lg my-container mx-2 mx-sm-3 mx-md-4 mx-lg-5 my-3 p-2 fade-in-animation @(IsShown?"visible-item":"hidden-item")">
    <h5 class="m-3">@TableName</h5>
    @if (GridData == null)
    {
        <p>Loading @TableName...</p>
    }
    else
    {
        <TelerikGrid Data=GridData
                     @bind-Page=CurrentPage PageSize=PageSize
                     Class="fade-in-animation"
                     Height="100%"
                     Pageable="true" Sortable="true" Groupable="false"
                     Resizable="false" Reorderable="true" AutoGenerateColumns="true"
                     Width="100%"
                     OnUpdate="@UpdateHandler" OnEdit="@EditHandler" OnDelete="@DeleteHandler" OnCreate="@CreateHandler" OnCancel="@CancelHandler">
            <GridToolBar>
                <GridCommandButton Command="Add" Icon="add" Class="add-max-width">Add Item</GridCommandButton>
                <GridSearchBox />
            </GridToolBar>
            <GridColumns>
                <GridAutoGeneratedColumns ColumnWidth="110px" />

                <GridCommandColumn Width="200px">
                    <GridCommandButton Command="Save" Icon="save" ShowInEdit="true">Update</GridCommandButton>
                    <GridCommandButton Command="Edit" Icon="edit">Edit</GridCommandButton>
                    <GridCommandButton Command="Delete" Icon="delete">Delete</GridCommandButton>
                    <GridCommandButton Command="Cancel" Icon="cancel" ShowInEdit="true">Cancel</GridCommandButton>
                </GridCommandColumn>

            </GridColumns>
        </TelerikGrid>
    }
</div>
<style>
    .add-max-width {
        max-width: 150px;
    }

    .k-grid .k-grid-search {
        max-width: 195px;
    }

    .visible-item {
        display: block;
    }

    .hidden-item {
        display: none;
    }

</style>